{template 'Public/header'}
<body  style="padding:10px;">
<script type="text/javascript">
function upimg()
{
	/*
		调用公共函数js.openupload，来打开上传页面
		参数1 imgclasbackautoclose，上传图片完成后回传的函数，如函数名有带autoclose，上传完成将页面自动关闭了
		参数2 上传的参数，是一个数组对象 如：{uptype}，参数可选
		uptype：上传类型，多个用逗号分开 *为不限制
		maxsize：单个文件限制最大小(M)为单位
		title：上传标题
		maxup：最多可选择添加的文件数目 0,不限制
	*/
	js.openupload('imgclasbackautoclose',{uptype:'jpg,png,gif,bmp,jpeg',maxsize:1,title:'上传图片',maxup:10})
}

function upfilea()
{
	js.openupload('fileclasbackautoclose');
}

//图片上传回传
function imgclasbackautoclose(arr){
	//回传时带来的参数 arr 是一个数组[{filename:''}]的类型
	//将文件信息显示即可
	for(var i=0;i<arr.length;i++){
		$('#imgview').append('<img src="'+arr[i].filepath+'" width="100" height="100">');
	}
	
	/*
		回传数组上参数如下
		{
			id:id号，由于没有保存到数据库(本参数暂时没用),
			filename:文件名,
			filetype:文件类型,
			fileext:文件扩展名，如png,gif等,
			filesize:文件大小数字 12555,
			filesizecn:文件大小已格式了带单位如6.30 M,
			newfile:新的文件名,
			filepath:上传完成后的全部路径
		}
	*/
}

//文件回传
function fileclasbackautoclose(arr){
	for(var i=0;i<arr.length;i++){
		$('#imgview').append(''+arr[i].fileext+'：<a target="_blank" href="'+arr[i].filepath+'">'+arr[i].filename+'</a> ('+arr[i].filesizecn+');<br>');
	}
}
</script>
<div>
文件上传测试，使用说明,可右键查看此页面的源文件，来查看详细使用说明哦！<br>
--) 本上传功能不支持(IE6,IE7,IE8内核)的浏览器，敬请谅解<br>
直接调用方便功能调用上传功能！上传成功，数据回传就要自己添加处理
</div>
<div style="padding:10px">
<input type="button" class="button" onClick="upimg()" value="上传图片测试">&nbsp; &nbsp; 
<input type="button" class="button" onClick="upfilea()" value="上传文件测试">
</div>
<div id="imgview"></div>

</body>
</html>